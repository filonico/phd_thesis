% document style
\documentclass[12pt]{report}
\usepackage[a4paper, total={17cm,25cm}]{geometry}
\linespread{1.5}                                    % regulate line spacing
\usepackage{setspace}
\usepackage[indent=20pt]{parskip}                   % indent first line
\usepackage[utf8]{inputenc}

% packages to print complete titles on table of contents
\usepackage{titletoc}
\titlecontents{chapter}
   [0pt]% <left>
   {\bfseries}% <above-code>
   {\chaptername\ \thecontentslabel: }% <numbered-entry-format>
   {}% <numberless-entry-format>
   {\titlerule*[0.8pc]{.}\contentspage}

% subfiles manager
\usepackage{subfiles}

% packages to manage tables
\usepackage{booktabs}
\usepackage{lscape}
\usepackage{longtable}
\usepackage{multirow}

% packages to manage images
\usepackage{graphicx}
\usepackage[labelfont=bf, font=small, labelsep=period]{caption}
\graphicspath{{./figures/}}
%\usepackage[subsection]{placeins} % prevent placing floats before a subsection
%\usepackage[CaptionAfterwards]{fltpage} % put captions on next page if required

% packages to manage bibliography and cross-references
\usepackage{nameref}
\usepackage[hidelinks]{hyperref}
\usepackage[style=apa, sorting=ynt, uniquename=false]{biblatex}
\addbibresource{tot.bib}

% package to manage random text
\usepackage{lipsum}

% packages for chemical formulae and special symbols
\usepackage{mhchem}
\usepackage{textcomp}
\usepackage{siunitx}
\sisetup{output-exponent-marker=\ensuremath{\mathrm{e}}} %correctly prints scientific notation

% packages and commands for acronyms (and species abbreviations)
\usepackage[acronym, nonumberlist, toc, nomain, nogroupskip, nopostdot, shortcuts, style=super]{glossaries-extra}
\setabbreviationstyle[species]{long-only-short-only}
\loadglsentries{sections/abbreviations}	
\renewcommand{\glsnamefont}[1]{\textbf{#1}} % make entries in glossary bold
\preto\chapter\glsresetall % reset glossary for every chapter

%-------------------------------------------------------------------------

\begin{document}

\subfile{sections/frontpage.tex}
\pagenumbering{roman}
\addcontentsline{toc}{chapter}{Table of contents} % include the TOC in TOC
\tableofcontents{}
\clearpage

\pagenumbering{arabic}

\printunsrtglossary*[title={List of abbreviations}, toctitle={List of abbreviations}]
{
	\renewcommand{\printunsrtglossaryentryprocesshook}[1]{%
		\glsxtriflabelinlist
		{\glscategory{#1}} % category label for this entry
		{species} % exclusion list
		{\printunsrtglossaryskipentry} % skip (exclude)
		{} % don't skip (include)
	}
}

\subfile{sections/chapter1_introduction}
\subfile{sections/chapter2_perspective}
\subfile{sections/chapter3_molecularEvolution}
\subfile{sections/chapter4_insitu}

% bibliography
\begin{refcontext}[sorting=nyt]
	\printbibliography[title=References]
	\addcontentsline{toc}{chapter}{References}
\end{refcontext}

% appendix and supp matherials
\subfile{sections/appendix}
\subfile{sections/supp_materials}

\end{document}
